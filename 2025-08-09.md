---
theme: dracula
title: "Running Python in the Browser: Practical Applications with Pyodide"
transition: fade
mdc: true
fonts:
  mono: JetBrains Mono
---

<LoadingScene />

---
layout: center
class: bg-[#172966] text-white font-mono
---

<div class="text-3xl text-center leading-snug">
  Running Python in the Browser<br /><small>Practical Applications with Pyodide</small>
</div>
<div class="text-xs opacity-50">2025-08-09 · COSCUP 主會場</div>
<div class="text-xs italic opacity-50">Calpa Liu</div>

---
layout: center
class: bg-[#172966] text-white font-mono
---

<div class="text-xl opacity-70 mb-2">你是不是也經歷過——</div>

<div class="text-2xl sm:text-3xl font-bold leading-snug text-red-300">
  「想教學生/同事跑 NumPy 或 pandas，<br />但對方電腦沒裝 Python？」
</div>

<div class="text-2xl sm:text-3xl text-green-300 mt-6" v-click>
  今天，用 Pyodide 讓 <span class="font-bold">瀏覽器</span> 變成你的 Python 執行環境。
</div>

---
layout: two-cols
class: flex flex-col h-full justify-center items-center gap-4
---

## 投影片與 Demo

https://2025-08-09.calpa.me

- 稍後會有四段現場 demo（NumPy、JS ⟷ Python、Matplotlib、互動式蒙特卡羅估算 π）
- 若 Wi‑Fi 擁擠，請掃 QR 看線上備援

::right::

<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=https://2025-08-09.calpa.me&bgcolor=172966&color=ffffff" class="mt-6 w-36 h-36 mx-auto" alt="簡報 QR Code" />

---
layout: two-cols
class: flex flex-col h-full justify-center items-center
---

## 👋 嗨，我是 Calpa

- 全端工程師，喜歡把複雜技術講到能落地
- 近年專注 AI × Web，實作多個瀏覽器端工具
- 每日寫作，偏好用工程化方法做內容與產品

::right::

<img src="./assets/pfp.avif" class="rounded-full w-36 h-36 border-4 border-white shadow-lg" alt="Calpa Liu">

<div class="text-xl font-bold mt-2">Calpa Liu</div>
<div class="text-sm opacity-70">Full‑stack · AI 工具開發 · 技術寫作者</div>

---
layout: center
class: bg-[#172966] text-white font-mono
---

## 我的線上 Python REPL

<div class="text-xl mt-8 mb-6">
  <a href="https://calpa.me/tools/python-interpretor/" target="_blank" class="text-blue-300 hover:underline">https://calpa.me/tools/python-interpretor/</a>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mt-8">
  <div class="text-left">
    <h3 class="text-xl font-bold mb-4">特色</h3>
    <ul class="list-disc pl-5 space-y-2">
      <li>即開即用，無需登入/安裝</li>
      <li>完全在瀏覽器中執行 Python 3</li>
      <li>支援標準庫與熱門資料科學套件</li>
      <li>隨時隨地，有瀏覽器就能寫程式</li>
    </ul>
  </div>
  
  <div class="flex flex-col items-center">
    <img 
      src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://calpa.me/tools/python-interpretor/&bgcolor=172966&color=ffffff" 
      alt="Python REPL QR Code"
      class="w-40 h-40 border border-gray-600 rounded-lg p-2"
    >
    <p class="mt-2 text-sm opacity-70">掃描試用</p>
  </div>
</div>

---
layout: center
---

## 為什麼 Pyodide 是突破？

- 讓 **CPython** 跑在 **WebAssembly** 上，無安裝、跨平台
- 帶來 **Python 科學生態** 到瀏覽器（NumPy / pandas / SciPy / Matplotlib / scikit‑learn）
- 提供 **JS ⟷ Python FFI**，可雙向呼叫與共享物件
- 典型場景：教學、互動實驗、隱私在地運算、零後端 PoC

---
layout: center
---

## 30 秒看 WebAssembly（WASM）

- 瀏覽器可執行的二進位格式，接近原生效能
- 2017 主流瀏覽器支援；2019 成為 W3C 推薦標準
- 有了 WASM，**CPython → WASM** 才成為可能（Pyodide 的前提）

---
layout: center
---

## Pyodide 用戶價值

- **零安裝**：打開頁面就能跑 Python
- **擴散快**：靜態託管即可大規模佈署
- **隱私佳**：資料留在使用者端
- **可離線**：載入後斷網也能跑

---
layout: center
---

<h2>常見顧慮</h2>

- 初次載入時間（數秒）
- 記憶體吃重、大型數據不適合
- 部分套件相依 C/系統功能而不可用
- 不是取代 JS，而是互補

---

## Python 呼叫 JS

```py
import js

# 建立按鈕
btn = js.document.createElement("button")
btn.textContent = "Click me"

# 設定 CSS 樣式
btn.style.position = "absolute"
btn.style.top = "0px"
btn.style.left = "0px"
btn.style.zIndex = "10000"  # 需要是字串
btn.style.background = "red"
btn.style.color = "white"
btn.style.padding = "8px 12px"
btn.style.border = "none"
btn.style.cursor = "pointer"

# 綁定點擊事件
btn.onclick = lambda event: js.alert("GOOD")

# 附加到頁面
js.document.body.append(btn)
```

---
layout: center
---

## Live Demo 2：NumPy 在瀏覽器

```py
import numpy as np
np.arange(12).reshape(3,4)
```

> 備註：預先在頁面載入 `pyodide.js` 與對應 `.wasm`；若網路擁擠，請改看線上備援連結。

---
layout: two-cols
---

## Live Demo 3：DOM 互動（Python → JS）

```py
import js
from pyodide.ffi import to_js

items = ["Pyodide", "NumPy", "pandas"]
ul = js.document.createElement("ul")
for s in items:
    li = js.document.createElement("li")
    li.textContent = s
    ul.appendChild(li)
js.document.body.appendChild(ul)
```

::right::

- 展示 Python 操作 DOM 的直覺性
- 與教學/互動教材天然契合

---
layout: center
---

## Live Demo 4：Matplotlib 圖表輸出

````md magic-move
```py
# 0) 前置準備
import matplotlib.pyplot as plt
import numpy as np
import io, base64, js
```

```py
# 1) 產生圖表並轉成 data URL
x = np.linspace(0, 2*np.pi, 100)
y = np.sin(x)
plt.figure(figsize=(6, 4), dpi=120)
plt.plot(x, y, '--', linewidth=2)
plt.title('Sine in the Browser')
plt.tight_layout()
buf = io.BytesIO()
plt.savefig(buf, format="png", bbox_inches="tight", facecolor="white")
buf.seek(0)
data_url = "data:image/png;base64," + base64.b64encode(buf.read()).decode("ascii")
plt.close()
```

```py
# 2) 頂端置中標籤
tag = js.document.createElement("div")
tag.textContent = "Pyodide × Matplotlib"
tag.style.cssText = (
    "position:absolute;top:0;left:50%;transform:translateX(-50%);z-index:10000;"
    "background:rgba(0,0,0,.7);color:#fff;padding:6px 10px;border-radius:0 0 8px 8px;"
)
js.document.body.append(tag)
```

```py
# 3) 灰色半透明遮罩 + 置中容器（無事件）
overlay = js.document.createElement("div")
overlay.style.cssText = (
    "position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;"
    "align-items:center;justify-content:center;z-index:9999;"
)
modal = js.document.createElement("div")
modal.style.cssText = (
    "background:#f5f5f5;padding:16px;border-radius:12px;"
    "box-shadow:0 10px 30px rgba(0,0,0,.2);max-width:95vw;max-height:80vh;"
)
img = js.document.createElement("img")
img.style.cssText = "max-width:90vw;max-height:70vh;display:block;"
img.src = data_url
img.alt = "Matplotlib Sine"
```

```py
# 4) 組裝
modal.append(img)
overlay.append(modal)
js.document.body.append(overlay)
```
````

https://gist.github.com/calpa/dec16701f05a7906b3bb34bfec888cc9

---

## Live Demo 5: 可直接在 Pyodide 執行的互動式蒙特卡羅估算 π 的 Demo

https://gist.github.com/calpa/32b7a96fd54954c5b3d5fc19ab70b343

---

## Pyodide vs Google Colab

| 對比點 | Pyodide | Google Colab |
|---|---|---|
| 執行地點 | **瀏覽器 (WASM)** | 雲端 VM |
| 登入/安裝 | 不需登入、零安裝 | 需 Google 帳號、後端初始化 |
| 資料路徑 | 留在本機、隱私佳 | 上傳/掛載，合規考量 |
| JS 整合 | JS ⟷ Python 原生互通 | 弱 |
| 離線 | ✅ | ❌ |
| 適合 | 教學、互動、Demo、PoC | 分析、訓練、長時計算 |

> 結論：**不是替代關係**。Pyodide 擅長分發與互動，Colab 擅長重運算與研究。

---
layout: center
---

## 能裝哪些套件？

- 內建常見科學套件：**NumPy / pandas / SciPy / Matplotlib / scikit‑learn** 等
- `micropip` 可安裝 **純 Python** 的 PyPI 套件
- 對於大量原生擴展或系統呼叫的套件，需事先「移植」或尋找替代

---
layout: two-cols
class: items-start
---

## 什麼時候用 Pyodide？

- 不想要求受眾安裝環境
- 需要在地處理敏感資料
- 想把 Python 與 Web UI 無縫結合
- 需要離線教學/示範

::right::

## 什麼時候不要？

- 大型資料或長時間重運算
- 需要大量 I/O、GPU/TPU
- 嚴重依賴多進程/多線程的工作負載

---
layout: two-cols
---

## 效能與載入時間優化

- 以 **CDN** 提供 `.wasm` 與核心資產
- **延後載入**：互動時才載套件（如 Matplotlib）
- **快取**：Service Worker / `Cache‑Control`
- 減少 `micropip` 動態安裝；能預打包就預打包

---

## 互動體驗最佳化

- 首屏顯示 **Skeleton**，告知載入進度
- 提供 **離線備援**與**失敗重試**
- Demo 前預熱：先開隱藏頁觸發快取
- 準備低網速/無網備案（錄影與 Codesandbox 備援）

---
layout: center
---

## 與生態的關係

- **JupyterLite**：基於 Pyodide 的瀏覽器內 Jupyter
- **PyScript**：偏向 Python 開發者的 HTML 標籤式體驗；與 Pyodide 擇一載入
- **PyodideU**（Stanford）：教學導向 IDE，示範更完整的同步暫停與調試思路

---
layout: center
---

## 實戰藍圖：把它放進你的產品

1. 用 Pyodide 做 **前處理/後處理**，模型推論交給 WebGPU / ONNX Runtime Web
2. 教學平台：內嵌 **可互動範例**，不再要求安裝
3. 資安場景：在地運算 + 選擇性回傳統計/匿名特徵

---
layout: two-cols
class: flex flex-col h-full justify-center
---

> 大道至簡：讓每個有想法的人，**言出法隨**。

歡迎交流：

- Email：**ai@calpa.me**
- Facebook：[@calpaliu2048](https://facebook.com/calpaliu2048)
- Threads：[@calpaliu2025](https://www.threads.net/@calpaliu2025)
- LINE：@calpaliu2023

<div class="text-sm text-white/50 mt-6">
若覺得今天實用，請分享給需要的人。謝謝收看！
</div>

::right::

<div class="flex flex-col items-center">

<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=http://go.calpa.me/contact&bgcolor=172966&color=ffffff" class="mt-6 w-36 h-36 mx-auto" alt="Contact" />

http://go.calpa.me/contact

</div>
